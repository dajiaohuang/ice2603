1. 题目1

   增加io口：

   ![image-20230528003606737](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528003606737.png)

   <center>增加in_port2,out_port2
   </center>
   
   

   sys_clk_counter:

   ![image-20230528001321201](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528001321201.png)

   ![image-20230528003801098](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528003801098.png)

   <center>例化
   </center>

   ![image-20230528020809801](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528020809801.png)

   ![image-20230528021014154](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528021014154.png)

   <center>在sc_computer_main,sc_datamem增加接口

   ![image-20230528003919729](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528003919729.png)

   <center>显示学号

   汇编程序：

   lui x10, 0

   ori x4, x10, 0  

   addi x25, x0, 1

   addi x26, x0, 2

   addi x27, x0, 3

   addi x28, x0, 4

   sw x25, 0(x4)

   sw x26, 4(x4)

   sw x27, 8(x4)

   sw x28, 12(x4)

   addi x5, x0, 4

   call:

   jal sum   

   sw x12, 0(x4)

   lw x19, 0(x4)

   sub x18, x19, x12

   addi x5, x0, 3

   loop2:

   addi x5, x5, -1

   ori x18, x5, -1

   xori x18, x18, 1365

   addi x19, x0, -1

   andi x20, x19, -1

   or x16, x20, x19

   xor x18, x20, x19

   and x17, x20, x16

   beq x5, x0, shift

   j loop2

   shift:

   addi x5, x0, -1

   slli x18, x5, 15

   slli x18, x18, 16

   srai x18, x18, 16

   srli x18, x18, 15

   // 以下六条指令，前面三条指令用于设置端口地址寄存器，后面实现端口值的读取与写入

   addi x11, x0, 128

   addi x12, x0, 132

   addi x13, x0, 136

   lw x20, 0(x13)

   lw x21, 0(x11)

   sw x21, 0(x11)

   sw x18, 0(x12)

   sw x20, 0(x13)

   fi:

   j fi

   sum:

   add x18, x0, x0

   loop:

   lw x19, 0(x4)

   addi x4, x4, 4

   add x18, x18, x19

   addi x5, x5, -1

   bne x5, x0, loop

   slli x12, x18, 0

   jr ra

   仿真：

   ![image-20230528014112190](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528014112190.png)

   ![image-20230528021541628](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528021541628.png)

   板上验证：
   
   ![1f9a35fd91fc3e21f52117e88cb0f97](C:\Users\Administrator\AppData\Local\Temp\WeChat Files\1f9a35fd91fc3e21f52117e88cb0f97.jpg)

仿真结果计数器值为9a，转换为十进制就是9*16+10=154，其中最低两位对应位板上最低两位，因此两者结果相符。板上最高两位为学号87，次低两位为71，对应x18最后两位十进制数71.

读取时钟周期计数器值, 未执行该指令对应的时钟周期为76，执行后对应的时钟周期应该是 77, 因此对应正确的计数器的值应该是位 154

题目二

根据学号修改ram的coe：

![image-20230528023903213](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230528023903213.png)

板级验证：

![4](F:\计组\4.jpg)

汇编程序：直接用原有指令实现

main:

​    addi x11 x0 128 // 初始化 输出地址

​    addi x12 x0 132

​    addi x13 x0 136

​    addi x4 x0 0 //从前往后依次比较，x4存储的是目前比较到的指针

​    lw x15 0(x4)

​    lw x16 0(x4)

​    addi x8 x0 15 //计数器

​    j l

ed:

​    lw x20 0 x13  // 存到x20

​    sw x20 0 x13 

fi:

​    j fi

l2:

​    beq x8 x0 ed //计数器到0时退出循环

​    lw x14 4(x4) //取下一个数

​    add x16 x16 x14 // 更新x16（修改了alu，实际上是比大小操作）

​    addi x4 x4 4 //向后移动指针

​    addi x8 x8 -1 //计数器-1

​    sw x16 0 x12 //存到x12

​    j l2

l2set:

​    addi x8 x0 15 //计数器复位

​    addi x4 x0 0 //指针复位

​    j l2

l:

​    beq x8 x0 l2set //计数器到0时退出循环

​    lw x14 4(x4) //取下一个数

​    add x15 x15 x14//更新x15（修改了alu，实际上是比大小操作）

​    addi x4 x4 4 //向后移动指针

​    addi x8 x8 -1  //计数器-1

​    sw x15 0 x11 //存到x11

​    j l



Ripes 验证

![image-20230529155213672](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230529155213672.png)

执行后存储空间

![image-20230529153439159](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230529153439159.png)

两个12轮循环，共触发7次赋值，总时钟周期数为94，计数器的值应为 2 *×* 94 = 188，因此显示88。